(this["webpackJsonphackh-broadcast-web"]=this["webpackJsonphackh-broadcast-web"]||[]).push([[0],{234:function(e,t,a){e.exports=a(465)},239:function(e,t,a){},244:function(e,t,a){},245:function(e,t,a){},246:function(e,t,a){},443:function(e,t,a){},453:function(e,t,a){},465:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(5),o=a.n(c),s=(a(239),a(61)),l=a(224),i=a.n(l),u=a(35),m=a(32),d=(a(244),a(245),a(246),function(){return r.a.createElement("div",{className:"error404"},r.a.createElement("span",{className:"error404__path-invalid"},"page not found"))}),p=(a(102),a(44)),g=(a(466),a(167)),b=(a(251),a(166)),h=(a(169),a(88)),f=(a(103),a(26)),E=(a(255),a(168)),v=a(8),x=a.n(v),y=a(15),O=a(71),k=a(72),j=a(46),w=a(78),S=a(79),N=(a(90),a(34)),C=a(43),T=a(482),_=a(208),I=a.n(_),A=a(39),L=a(83),P=a.n(L),M=function(){var e=Object(y.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=Object(A.database)().ref("telegram").limitToLast(200),e.abrupt("return",new Promise((function(e,a){try{t.on("value",(function(t){t.val();var a=[];return t.forEach((function(e){a.push(e.val())})),e(a.reverse())}))}catch(n){a(n)}})));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),D=function(){var e=Object(y.a)(x.a.mark((function e(t){var a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=Object(A.database)().ref("telegram"),e.next=3,a.push({message:t.message,date:P()().format()}).then((function(e){return e.key}));case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z=I.a.create({baseURL:"https://zwrqt3cve3.execute-api.ap-southeast-1.amazonaws.com/dev/api",headers:{"Content-Type":"application/json"}});z.interceptors.request.use((function(e){var t=function(){try{var e=JSON.parse(localStorage.getItem("state")).auth.token.token;if(!e)throw Error();return e}catch(t){return null}}();return t&&(e.headers.Authorization="Bearer ".concat(t)),e}),(function(e){Promise.reject(e)}));var H=function(e){return z.post("/messenger",e)},K=function(e){return z.post("/telegram",e)},V=function(){return M()},B=function(e){return D(e)},R=function(e){return Object(A.auth)().signInWithCustomToken(e)},W=function(){return Object(A.auth)().signOut()},Y=function(e){return z.post("/auth",{phone:e})},q=function(e,t){return z.post("/auth",{phone:e,code:t})},G=function(){return Object(A.auth)().currentUser.getIdTokenResult()},U=a(87);U.a.use(C.a).init({resources:{en:{translation:{"Welcome to React":"Welcome to React and react-i18next",Outbox:"Outbox",Drafts:"Drafts",Text:"Text","Text + buttons":"Text + buttons","Image + buttons":"Image + buttons","Style 1":"Style 1","Style 2":"Style 2","Style 3":"Style 3",app_title:"COVID-19 Broadcasting System of The Kingdom of Cambodia",logout_title:"logout from system?",cancel:"Cancel",reset:"Reset",send:"Send",ok:"OK","Something went wrong":"Something went wrong!","Are you sure you want to send":"Are you sure you want to send this message?","send message":"Send message to {{provider}}",invalid_phone:"Invalid phone number! Please check your phone number",login_with_phone:"Login with your phone number",enter_otp:"Enter your OTP you recieve from SMS",phone_placeholder:"e.g +855123456789",otp_placeholder:"6 digits code",send_code:"Send Codes",login:"Login",text_message:"Text Message"}},km:{translation:{"Welcome to React":"\u179f\u17bc\u1798\u179f\u17d2\u179c\u17b6\u1782\u1798\u1793\u17cd\u1798\u1780\u1780\u17b6\u1793\u17cb React",Outbox:"\u1794\u17d2\u179a\u17a2\u1794\u17cb\u200b\u1785\u17c1\u1789",Drafts:"\u179f\u17c6\u178e\u17c1\u179a\u1796\u17d2\u179a\u17c0\u1784",Text:"\u17a2\u178f\u17d2\u1790\u1794\u1791","Text + buttons":"\u17a2\u178f\u17d2\u1790\u1794\u1791 + \u1794\u17ca\u17bc\u178f\u17bb\u1784","Image + buttons":"\u179a\u17bc\u1794\u1797\u17b6\u1796 + \u1794\u17ca\u17bc\u178f\u17bb\u1784","Style 1":"\u179b\u17c6\u1793\u17b6\u17c6\u200b \u1791\u17b8\u17e1","Style 2":"\u179b\u17c6\u1793\u17b6\u17c6 \u1791\u17b8\u17e2","Style 3":"\u179b\u17c6\u1793\u17b6\u17c6 \u1791\u17b8\u17e3",app_title:"\u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1795\u17d2\u179f\u1796\u17d2\u179c\u1795\u17d2\u179f\u17b6\u1799 COVID-19 \u1793\u17c3\u200b\u1796\u17d2\u179a\u17c7\u200b\u179a\u17b6\u1787\u17b6\u178e\u17b6\u1785\u1780\u17d2\u179a\u200b\u1780\u1798\u17d2\u1796\u17bb\u1787\u17b6",logout_title:"\u1785\u17b6\u1780\u1785\u17c1\u1789\u1796\u17b8 \u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1795\u17d2\u179f\u1796\u17d2\u179c\u1795\u17d2\u179f\u17b6\u1799 COVID-19?",cancel:"\u1794\u17c4\u17c7\u1794\u1784\u17cb",reset:"\u179b\u17bb\u1794\u1785\u17c4\u179b",send:"\u1795\u17d2\u1789\u17be",ok:"\u1794\u17b6\u1791/\u1785\u17b6\u179f","Something went wrong":"\u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1795\u17d2\u179f\u1796\u17d2\u179c\u1795\u17d2\u179f\u17b6\u1799","Are you sure you want to send":"\u1794\u17d2\u179a\u1796\u17d0\u1793\u17d2\u1792\u1795\u17d2\u179f\u1796\u17d2\u179c\u1795\u17d2\u179f\u17b6\u1799","send message":"\u1795\u17d2\u1789\u17be\u179f\u17b6\u179a\u1791\u17c5\u1780\u17b6\u1793\u17cb\u200b {{provider}}",invalid_phone:"\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791\u1798\u17b7\u1793\u178f\u17d2\u179a\u17b9\u1798\u178f\u17d2\u179a\u17bc\u179c! \u179f\u17bc\u1798\u1796\u17b7\u1793\u17b7\u178f\u17d2\u1799\u1798\u17d2\u178a\u1784\u1791\u17c0\u178f...",login_with_phone:"\u1785\u17bc\u179b\u1794\u17d2\u179a\u17be\u178a\u17c4\u1799\u179b\u17c1\u1781\u1791\u17bc\u179a\u179f\u17d0\u1796\u17d2\u1791",enter_otp:"\u1794\u1789\u17d2\u1787\u17bc\u179b\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb",phone_placeholder:"\u17a7 +\u17e8\u17e5\u17e5\u17e1\u17e2\u17e3\u17e4\u17e5\u17e6\u17e7\u17e8\u17e9",otp_placeholder:"\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb\u17e6\u1781\u17d2\u1791\u1784\u17cb",send_code:"\u1795\u17d2\u1789\u17be\u179b\u17c1\u1781\u179f\u1798\u17d2\u1784\u17b6\u178f\u17cb",login:"\u1785\u17bc\u179b\u1794\u17d2\u179a\u17be",text_message:"\u179f\u17b6\u179a"}}},lng:"en",fallbackLng:"en",interpolation:{escapeValue:!1}}),U.a.changeLanguage("km-KH");var J=U.a,F=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={phone:"855",isLoading:!1,error:null,phoneError:!1,codeSent:!1,code:""},n.requestOtp=n.requestOtp.bind(Object(j.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(j.a)(n)),n.authenticateOtp=n.authenticateOtp.bind(Object(j.a)(n)),n.handleOtpChange=n.handleOtpChange.bind(Object(j.a)(n)),n}return Object(k.a)(a,[{key:"requestOtp",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,a,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.state,a=t.phone,!t.phoneError){e.next=4;break}return r=J.t("invalid_phone"),N.a.error({title:r,className:"border-2 border-blue-dark rounded-md p-0",okText:J.t("ok")}),e.abrupt("return");case 4:return this.setState({isLoading:!0}),e.prev=5,e.next=8,Y("+".concat(a));case 8:n=e.sent,console.log("result",n),(0,this.props.savePhone)(a),this.setState({codeSent:!0,isLoading:!1}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(5),this.setState({isLoading:!1,error:e.t0.response.data});case 18:case"end":return e.stop()}var r}),e,this,[[5,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"authenticateOtp",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,a,n,r,c,o,s,l;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.state,a=t.code,n=t.phone,e.prev=1,e.next=4,q("+".concat(n),a);case 4:return r=e.sent,c=this.props,o=c.saveAuthToken,s=c.history,e.next=8,R(r.data.data.customToken);case 8:return e.next=10,G();case 10:l=e.sent,o(l),s.push("/"),e.next=19;break;case 15:e.prev=15,e.t0=e.catch(1),console.log("error.response",e.t0.response.data),this.setState({error:e.t0.response.data});case 19:case"end":return e.stop()}}),e,this,[[1,15]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleOtpChange",value:function(e){this.setState({code:e})}},{key:"handleInputChange",value:function(e){var t=this.state.phone;console.log("!value || value.length < 11",!e||e.length<11),console.log("phone",t),this.setState({phone:e?"".concat(e):"855",phoneError:!t||t.length<11})}},{key:"render",value:function(){var e=this.state,t=e.phone,a=e.isLoading,n=e.code,c=e.error,o=e.phoneError,s=e.codeSent,l=this.props.t;return r.a.createElement(p.a,{style:{minHeight:"100vh",backgroundImage:"url(/login-image.jpg)"},className:"flex flex-grow justify-center items-center"},s?r.a.createElement(g.a,{style:{width:500,minHeight:"38vh"},className:"flex flex-col"},r.a.createElement("h1",{className:"py-1 pb-4 text-xl",style:{fontSize:"1.825em",fontWeight:"bold"}},l("app_title")),r.a.createElement("h3",{className:"py-1 pb-6 text-lg",style:{fontSize:"1.825em",fontWeight:"bold"}},l("enter_otp")),r.a.createElement(b.a,{className:"flex flex-grow flex-col"},r.a.createElement(E.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),className:"py-1 w-full",placeholder:l("otp_placeholder"),name:"code",defaultValue:"855",maxLength:"13",value:n,type:"text",onChange:this.handleOtpChange}),r.a.createElement(f.a,{className:"btn-round my-2 flex flex-grow items-center justify-center",type:"button",onClick:this.authenticateOtp,loading:a},l("login")),c&&r.a.createElement(h.a,{className:"my-2",message:c.message,type:"error",showIcon:!0,banner:!0,closable:!0}))):r.a.createElement(g.a,{style:{width:500,minHeight:"38vh"},className:"flex flex-col"},r.a.createElement("h1",{className:"py-1 pb-4 text-xl",style:{fontSize:"1.825em",fontWeight:"bold"}},l("app_title")),r.a.createElement("h3",{className:"py-1 pb-6 text-lg",style:{fontSize:"1.825em",fontWeight:"bold"}},l("login_with_phone")),r.a.createElement(b.a,{className:"flex flex-grow flex-col"},r.a.createElement(E.a,{prefix:r.a.createElement(T.a,{className:"site-form-item-icon"}),className:"py-1 w-full",placeholder:l("phone_placeholder"),name:"phone",defaultValue:"855",maxLength:"13",value:t,type:"text",onChange:this.handleInputChange}),r.a.createElement(f.a,{className:"btn-round my-2 flex flex-grow items-center justify-center",type:"button",onClick:this.requestOtp,loading:a},l("send_code")),o&&r.a.createElement(h.a,{className:"my-2",message:l("invalid_phone"),type:"warning",showIcon:!0,banner:!0,closable:!0}),c&&r.a.createElement(h.a,{className:"my-2",message:c.message,type:"warning",showIcon:!0,banner:!0,closable:!0}))))}}]),a}(n.Component),Q=Object(s.b)((function(e){return{auth:e.auth}}),(function(e){return{savePhone:function(t){e(function(e){return function(t){t({type:"SAVE_PHONE",payload:e})}}(t))}}}))(Object(C.c)()(Object(u.g)(F))),X=a(129),Z=a(467),$=a(468),ee=a(469),te=a(470),ae=a(471),ne=a(472),re=a(473),ce=a(217),oe=a(474),se=a(475),le=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={code:""},n.authenticateOtp=n.authenticateOtp.bind(Object(j.a)(n)),n.handleInputChange=n.handleInputChange.bind(Object(j.a)(n)),n}return Object(k.a)(a,[{key:"authenticateOtp",value:function(){var e=Object(y.a)(x.a.mark((function e(){var t,a,n,r,c,o,s;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.props.auth,a=this.state.code,e.prev=2,e.next=5,q(t.phone,a);case 5:return n=e.sent,console.log("authenticateOtp",n),console.log("result.data.data.customToken",n.data.data.customToken),r=this.props,c=r.saveAuthToken,o=r.history,e.next=11,R(n.data.data.customToken);case 11:return e.next=13,G();case 13:s=e.sent,console.log("token",s),c(s),o.push("/"),e.next=22;break;case 19:e.prev=19,e.t0=e.catch(2),console.log("error",e.t0);case 22:case"end":return e.stop()}}),e,this,[[2,19]])})));return function(){return e.apply(this,arguments)}}()},{key:"handleInputChange",value:function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,n=t.name;this.setState(Object(X.a)({},n,a))}},{key:"render",value:function(){var e=this.state.code;return r.a.createElement("div",{className:"section section-image section-login",style:{backgroundImage:"url(/login-image.jpg)"}},r.a.createElement(Z.a,null,r.a.createElement($.a,{style:{paddingTop:"30px"}},r.a.createElement(ee.a,{className:"mx-auto",lg:"4",md:"6"},r.a.createElement(te.a,{className:"card-register"},r.a.createElement("h3",{className:"title mx-auto",style:{fontSize:"1.825em",fontWeight:"bold"}},"Please input your OTP"),r.a.createElement(ae.a,{className:"register-form"},r.a.createElement("label",null,"OTP"),r.a.createElement(ne.a,{className:"form-group-no-border"},r.a.createElement(re.a,{addonType:"prepend"},r.a.createElement(ce.a,null,r.a.createElement("i",{className:"nc-icon nc-mobile"}))),r.a.createElement(oe.a,{placeholder:"OTP",type:"number",name:"code",value:e,onChange:this.handleInputChange})),r.a.createElement(se.a,{block:!0,onClick:this.authenticateOtp,className:"btn-round",color:"danger",type:"button"},"Login")))))))}}]),a}(n.Component),ie=Object(s.b)((function(e){return{auth:e.auth}}),(function(e){return{saveAuthToken:function(t){e(function(e){return function(t){t({type:"SAVE_AUTH_TOKEN",payload:e})}}(t))}}}))(Object(u.g)(le)),ue=(a(203),a(19)),me=a(476),de=p.a.Sider,pe=ue.a.SubMenu,ge=function(){var e=Object(C.b)().t;return r.a.createElement(de,null,r.a.createElement("div",{style:{width:"100px",margin:"20px 0px 20px 0px",transform:"translate(".concat(50,"%")}},r.a.createElement(m.b,{to:"/"},r.a.createElement("img",{className:"h-full w-full border border-solid border-white rounded-sm cursor-pointer",src:"/flag-cambodia.jpg",alt:"Khmer"}))),r.a.createElement(ue.a,{theme:"dark",mode:"inline",style:{height:"100%",borderRight:0}},r.a.createElement(pe,{key:"messages",title:r.a.createElement("span",null,r.a.createElement(me.a,{component:function(){return r.a.createElement("img",{src:"/mail.svg",alt:"message"})}}),"Messages")},r.a.createElement(ue.a.Item,{key:"outbox"},r.a.createElement(m.b,{to:"/outbox"},e("Outbox"))),r.a.createElement(ue.a.Item,{key:"draft"},r.a.createElement(m.b,{to:"/drafts"},e("Drafts")))),r.a.createElement(pe,{key:"messenger",title:r.a.createElement("span",null,r.a.createElement(me.a,{component:function(){return r.a.createElement("img",{src:"/messenger.svg",alt:"messenger"})}}),"Messenger")},r.a.createElement(ue.a.Item,{key:"text-only"},r.a.createElement(m.b,{to:"/messenger-text"},e("Text"))),r.a.createElement(ue.a.Item,{key:"text-with-button"},r.a.createElement(m.b,{to:"/messenger-text-button"},e("Text + buttons"))),r.a.createElement(ue.a.Item,{key:"image-with-button"},r.a.createElement(m.b,{to:"/messenger-image-button"},e("Image + buttons")))),r.a.createElement(pe,{key:"telegram",title:r.a.createElement("span",null,r.a.createElement(me.a,{component:function(){return r.a.createElement("img",{src:"/telegram.svg",alt:"telegram"})}}),"Telegram")},r.a.createElement(ue.a.Item,{key:"style-1"},r.a.createElement(m.b,{to:"/telegram-style-1"},e("Style 1"))),r.a.createElement(ue.a.Item,{key:"style-2"},r.a.createElement(m.b,{to:"/telegram-style-2"},e("Style 2"))),r.a.createElement(ue.a.Item,{key:"style-3"},r.a.createElement(m.b,{to:"/telegram-style-3"},e("Style 3")))),r.a.createElement(pe,{key:"sms",title:r.a.createElement("span",null,r.a.createElement(me.a,{component:function(){return r.a.createElement("img",{src:"/sms.svg",alt:"sms"})}}),"SMS")},r.a.createElement(ue.a.Item,{key:"sms-text"},r.a.createElement(m.b,{to:"/sms-text"},e("Text"))))))},be=(a(435),a(219)),he=a(481),fe=(a(437),a(230)),Ee=(a(439),a(218)),ve=function(e){var t=e.openKeys,a=e.onOpenChange;return r.a.createElement(ue.a,{mode:"inline",openKeys:t,onOpenChange:a,style:{width:256}},r.a.createElement(ue.a.Item,{key:"1"},"Option 1"),r.a.createElement(ue.a.Item,{key:"2"},"Option 2"),r.a.createElement(ue.a.Item,{key:"3"},"Option 3"),r.a.createElement(ue.a.Item,{key:"4"},"Option 4"))},xe=function(e){var t=e.image,a=e.name,n=e.className;return r.a.createElement(fe.a,{content:r.a.createElement(ve,{openKeys:["123"]}),trigger:"click"},r.a.createElement("div",{className:"flex flex-row avatar-info-panel items-center hover:bg-gray-800 cursor-pointer ".concat(n)},r.a.createElement("h4",{className:"text-white p-2 m-0"},a),r.a.createElement(Ee.a,{size:"large",src:t})))},ye=function(e){console.log("lang",e),U.a.changeLanguage(e)},Oe=function(){return r.a.createElement("div",{className:"langauge-switcher flex flex-row"},r.a.createElement("div",{className:"img-wrapper w-6 h-4 mx-1 border border-solid border-white rounded-sm cursor-pointer",onClick:function(){return ye("km")}},r.a.createElement("img",{className:"h-full w-full",src:"/flag-cambodia.jpg",alt:"Khmer"})),r.a.createElement("div",{className:"img-wrapper w-6 h-4 mx-1 border border-solid border-white rounded-sm cursor-pointer",onClick:function(){return ye("en")}},r.a.createElement("img",{className:"h-full w-full",src:"/flag-british.jpg",alt:"English"})))},ke=N.a.confirm,je=p.a.Header,we=function(e){var t=e.image,a=void 0===t?"":t,n=e.name,c=void 0===n?"John Doe":n,o=Object(C.b)().t;return r.a.createElement(je,{className:"flex flex-row items-center overflow-hidden  p-8",style:{padding:0}},r.a.createElement("h1",{className:"text-white text-xl mr-auto"},o("app_title")),r.a.createElement(Oe,null),r.a.createElement(xe,{image:a,name:c,className:"px-2"}),r.a.createElement(be.a,{type:"vertical",className:"h-10"}),r.a.createElement(he.a,{className:"text-xl text-white px-2 cursor-pointer",onClick:function(){return e=o("logout_title"),t=o("ok"),a=o("cancel"),void ke({title:e,onOk:function(){return Object(y.a)(x.a.mark((function e(){return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W();case 2:localStorage.clear(),window.location.href="/";case 4:case"end":return e.stop()}}),e)})))()},onCancel:function(){console.log("Cancel")},okText:t,cancelText:a});var e,t,a}}))},Se=p.a.Content,Ne=function(e){Object(S.a)(a,e);var t=Object(w.a)(a);function a(e){var n;return Object(O.a)(this,a),(n=t.call(this,e)).state={collapsed:!1},n}return Object(k.a)(a,[{key:"render",value:function(){return r.a.createElement(p.a,{style:{minHeight:"100vh"}},r.a.createElement(ge,{width:200,className:"site-layout-background"}),r.a.createElement(p.a,{className:"site-layout"},r.a.createElement(we,{className:"site-layout-background",style:{padding:0}}),r.a.createElement(Se,{style:{margin:"0 16px"}},this.props.children)))}}]),a}(n.Component),Ce=(a(441),a(220)),Te=a(14),_e=a(477),Ie=a(478),Ae=a(479),Le=a(480),Pe=a(2),Me=a.n(Pe),De=(a(443),function(){var e=Object(n.useState)([]),t=Object(Te.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),s=Object(Te.a)(o,2)[1],l=Object(n.useState)(!0),i=Object(Te.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)("1"),p=Object(Te.a)(d,2),g=p[0],b=p[1];Object(n.useEffect)((function(){h()}),[]);var h=Object(n.useCallback)(Object(y.a)(x.a.mark((function e(){var t;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V();case 3:t=e.sent,console.log("data",t),m(!1),s(null),c(t),e.next=15;break;case 10:e.prev=10,e.t0=e.catch(0),s(e.t0),a=e.t0,N.a.error({title:J.t("Something went wrong"),content:a.message,className:"border-2 border-blue-dark rounded-md p-0",okText:J.t("ok")}),m(!1);case 15:case"end":return e.stop()}var a}),e,null,[[0,10]])}))),[u,a]);return u?r.a.createElement("div",{className:"section-spinner"},r.a.createElement(Ce.a,null)):r.a.createElement("div",{className:"main-section-tab"},r.a.createElement($.a,null,r.a.createElement(ee.a,{xs:"6",sm:"4",md:"4",className:"section-cols section-cols-scroll"},r.a.createElement(_e.a,{tabs:!0,vertical:!0,pills:!0},a.map((function(e,t){return r.a.createElement(Ie.a,{className:"section-nav-item",key:t.toString},r.a.createElement(se.a,{className:Me()("toggleButton",{active:g===t.toString()}),onClick:function(){var e;e=t.toString(),g!==e&&b(e)}},r.a.createElement($.a,{className:"section-sub-row"},r.a.createElement(ee.a,{lg:"3",className:"section-sub-col-left"},r.a.createElement(me.a,{component:function(){return r.a.createElement("img",{src:"/telegram.svg",alt:"telegram"})}}),r.a.createElement("p",{className:"section-sub-p"},P()(e.date).format("HH:mm")),r.a.createElement("p",{className:"section-sub-p"},P()(e.date).format("DD-MM-YYYY"))),r.a.createElement(ee.a,{lg:"9",className:"section-sub-col-right"},r.a.createElement("p",{className:"section-sub-p section-sub-p-overflow text-black"},e.message)))))})))),r.a.createElement(ee.a,{xs:"6",sm:"6",md:"6",className:"section-cols section-cols-right"},r.a.createElement(Ae.a,{activeTab:g},a.map((function(e,t){return r.a.createElement(Le.a,{tabId:t.toString(),key:t.toString()},r.a.createElement("div",{className:"section-tab-container"},r.a.createElement($.a,null,r.a.createElement(ee.a,{lg:"2"},r.a.createElement(me.a,{style:{fontSize:"10"},component:function(){return r.a.createElement("img",{src:"/telegram.svg",alt:"telegram"})}})),r.a.createElement(ee.a,{lg:"1"},r.a.createElement("p",{className:"section-sub-p"})),r.a.createElement(ee.a,{lg:"2"},J.t("text_message")),r.a.createElement(ee.a,{lg:"4"},r.a.createElement("p",{className:"section-sub-p"},P()(e.date).format("HH:mm DD-MM-YYYY")))),r.a.createElement("hr",{className:"my-2",style:{borderColor:"#000",fontSize:"2px",borderTopWidth:"2px"}}),r.a.createElement("p",{className:"section-sub-p section-sub-scroll"},e.message)))}))))))}),ze=function(){return r.a.createElement(Ne,null,r.a.createElement("div",{className:"content flex flex-row h-full"},r.a.createElement(De,null)))},He=(a(444),a(228).a.TextArea),Ke=function(e){var t=e.messageProviderIcon,a=e.messageProviderLabel;return r.a.createElement("div",{className:"message-provider flex flex-row justify-start items-center"},r.a.createElement("img",{className:"p-2",src:t,alt:a}),r.a.createElement("p",{className:"p-2 font-semibold"},a))},Ve=function(e){var t=e.messenger,a=e.onMessageChange,n=e.message,c=void 0===n?"":n,o=e.onSend,s=e.onCancel,l=e.className,i=e.isSuccess,u=e.disabled,m=Object(C.b)().t,d=t.messageProviderLabel,p=t.messageProviderIcon,g=t.maxChar;return r.a.createElement("div",{style:{height:"80%"},className:"message-form flex flex-col ".concat(l)},i&&r.a.createElement(h.a,{className:"mb-2",message:m("Message sent"),type:"success",showIcon:!0,banner:!0,closable:!0}),r.a.createElement("div",{className:"message-provider"},r.a.createElement(Ke,{messageProviderLabel:d,messageProviderIcon:p})),r.a.createElement("div",{className:"characters-counter top-0 right-0 pt-2 flex justify-end"},"".concat(c.length,"/").concat(g)),r.a.createElement("div",{className:"textarea-container flex-grow h-auto "},r.a.createElement(He,{autoSize:!0,className:"h-full w-full  p-4 border-2 border-solid border-blue-dark rounded-md",style:{resize:"none"},value:c,maxLength:g,onChange:function(e){return a(e)},disabled:u,placeholder:m("send message",{provider:d})})),r.a.createElement("div",{className:"message-form__buttons flex flex-row items-center justify-end p-2 pr-0"},r.a.createElement(f.a,{className:"m-2 text-blue-dark border-2 border-blue-dark rounded-md hover:text-white hover:bg-blue",onClick:s,disabled:u},m("cancel")),r.a.createElement(f.a,{className:"m-2 mr-0 text-white border-2 border-blue-dark bg-blue-dark rounded-md hover:text-white hover:bg-blue",onClick:o,type:"primary",disabled:u||!c},m("send"))))},Be=(a(452),a(223)),Re=function(e){var t,a=e.className,n=e.type,c=e.messages;switch(n){case"telegram":t={background:"#19B7EA",bubbleBackground:"#fff"};break;case"messenger":t={background:"#f1f0f0",bubbleBackground:"#d3d3d3"};break;default:t={background:"#fff",bubbleBackground:"#d3d3d3"}}return r.a.createElement("div",{className:"virtual-device ".concat(a)},r.a.createElement(Be.a,{height:500,orientation:"portrait",color:"black"},r.a.createElement("div",{style:{height:"100%",overflowY:"scroll",backgroundColor:t.background,display:"flex",flexDirection:"column",justifyContent:"flex-end"}},r.a.createElement("div",{style:{fontSize:10,borderRadius:8,display:"flex",paddingTop:5,paddingLeft:10,paddingRight:10,minHeight:20,margin:"0 40px 8px 8px",borderStyle:"solid",borderWidth:"1px",backgroundColor:t.bubbleBackground,wordBreak:"break-word",whiteSpace:"pre-wrap"}},r.a.createElement("span",null,c)))))},We={key:"telegram",label:"Telegram",maxChar:4096,icon:"/telegram.svg"},Ye="messenger",qe="Messenger",Ge=300,Ue="/messenger.svg",Je="",Fe="sms",Qe=300,Xe="",Ze=function(e){N.a.error({title:J.t("Something went wrong"),content:e.message,className:"border-2 border-blue-dark rounded-md p-0",okText:J.t("ok")})},$e=function(){var e=Object(n.useState)(""),t=Object(Te.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),s=Object(Te.a)(o,2)[1],l=Object(n.useState)(!1),i=Object(Te.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(Te.a)(d,2),g=p[0],b=p[1],h=Object(n.useState)(""),f=Object(Te.a)(h,2),E=f[0],v=f[1],O=Object(n.useState)(100),k=Object(Te.a)(O,2),j=k[0],w=k[1],S=Object(n.useState)(""),C=Object(Te.a)(S,2),T=C[0],_=C[1],I=Object(n.useState)(!1),A=Object(Te.a)(I,2),L=A[0],P=A[1];Object(n.useEffect)((function(){return"telegram"===We.key?(b(We.label),v(We.icon),w(We.maxChar),_(We.template)):"telegram"===Ye?(b(qe),v(Ue),w(Ge),_(Je)):"telegram"===Fe&&(b(qe),v(Ue),w(Qe),_(Xe)),function(){b(""),v(""),w(100),_("")}}),["telegram"]),Object(n.useEffect)((function(){var e=setTimeout((function(){L&&P(!1)}),3e3);return function(){return clearTimeout(e)}}),[L]);var M=Object(n.useCallback)(Object(y.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,D({message:a});case 6:return t=e.sent,e.next=9,K({messageId:t});case 9:n=e.sent,console.log("save data for history?",n),console.log("or trigger fetch messages"),m(!1),s(null),c(""),P(!0),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),s(e.t0),Ze(e.t0),m(!1);case 23:case"end":return e.stop()}}),e,null,[[3,18]])}))),[u,a]),D=Object(n.useCallback)(function(){var e=Object(y.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B({message:t.message});case 3:return a=e.sent,m(!1),s(null),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),s(e.t0),Ze(e.t0),m(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[]),z=Object(n.useCallback)((function(){m(!1),m(!1),s(null)}),[]),H={messageProviderLabel:g,messageProviderIcon:E,maxChar:j,template:T};return r.a.createElement(Ne,null,r.a.createElement("div",{className:"content flex flex-row h-full"},r.a.createElement(Ve,{className:"flex-grow p-4",messenger:H,onMessageChange:function(e){return c(e.target.value)},message:a,onSend:function(){return function(e,t){N.a.confirm({title:J.t("Are you sure you want to send"),onOk:function(){e()},onCancel:function(){t()},className:"border-2 border-blue-dark rounded-md p-0",okText:J.t("ok"),cancelText:J.t("cancel")})}(M,z)},onCancel:function(){return c("")},disabled:u,isSuccess:L}),r.a.createElement(Re,{className:"flex-grow p-4",type:"telegram",messages:a})))},et=function(e){N.a.error({title:J.t("Something went wrong"),content:e.message,className:"border-2 border-blue-dark rounded-md p-0",okText:J.t("ok")})},tt=[{path:"/",component:$e,exact:!0,private:!0},{path:"/login",component:Q,exact:!0},{path:"/otp",component:ie,exact:!0},{path:"/outbox",component:ze,exact:!0},{path:"/messenger-text",component:function(){var e=Object(n.useState)(""),t=Object(Te.a)(e,2),a=t[0],c=t[1],o=Object(n.useState)(null),s=Object(Te.a)(o,2)[1],l=Object(n.useState)(!1),i=Object(Te.a)(l,2),u=i[0],m=i[1],d=Object(n.useState)(""),p=Object(Te.a)(d,2),g=p[0],b=p[1],h=Object(n.useState)(""),f=Object(Te.a)(h,2),E=f[0],v=f[1],O=Object(n.useState)(100),k=Object(Te.a)(O,2),j=k[0],w=k[1],S=Object(n.useState)(""),C=Object(Te.a)(S,2),T=C[0],_=C[1],I=Object(n.useState)(!1),A=Object(Te.a)(I,2),L=A[0],P=A[1];Object(n.useEffect)((function(){return"messenger"===We.key?(b(We.label),v(We.icon),w(We.maxChar),_(We.template)):"messenger"===Ye?(b(qe),v(Ue),w(Ge),_(Je)):"messenger"===Fe&&(b(qe),v(Ue),w(Qe),_(Xe)),function(){b(""),v(""),w(100),_("")}}),["messenger"]),Object(n.useEffect)((function(){var e=setTimeout((function(){L&&P(!1)}),3e3);return function(){return clearTimeout(e)}}),[L]);var M=Object(n.useCallback)(Object(y.a)(x.a.mark((function e(){var t,n;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!u){e.next=2;break}return e.abrupt("return");case 2:return m(!0),e.prev=3,e.next=6,D({message:a});case 6:return t=e.sent,e.next=9,H({messageId:t});case 9:n=e.sent,console.log("save data for history?",n),console.log("or trigger fetch messages"),m(!1),s(null),c(""),P(!0),e.next=23;break;case 18:e.prev=18,e.t0=e.catch(3),s(e.t0),et(e.t0),m(!1);case 23:case"end":return e.stop()}}),e,null,[[3,18]])}))),[u,a]),D=Object(n.useCallback)(function(){var e=Object(y.a)(x.a.mark((function e(t){var a;return x.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,B({message:t.message});case 3:return a=e.sent,m(!1),s(null),e.abrupt("return",a);case 9:e.prev=9,e.t0=e.catch(0),s(e.t0),et(e.t0),m(!1);case 14:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}(),[]),z=Object(n.useCallback)((function(){m(!1),m(!1),s(null)}),[]),K={messageProviderLabel:g,messageProviderIcon:E,maxChar:j,template:T};return r.a.createElement(Ne,null,r.a.createElement("div",{className:"content flex flex-row h-full"},r.a.createElement(Ve,{className:"flex-grow p-4",messenger:K,onMessageChange:function(e){return c(e.target.value)},message:a,onSend:function(){return function(e,t){N.a.confirm({title:J.t("Are you sure you want to send"),onOk:function(){e()},onCancel:function(){t()},className:"border-2 border-blue-dark rounded-md p-0",okText:J.t("ok"),cancelText:J.t("cancel")})}(M,z)},onCancel:function(){return c("")},disabled:u,isSuccess:L}),r.a.createElement(Re,{className:"flex-grow p-4",type:"messenger",messages:a})))},exact:!0},{path:"/telegram-style-1",component:$e,exact:!0},{component:d}],at=[{from:"/test",to:"/",exact:!0}],nt=(a(453),function(e){return e.redirectList.map((function(e){return r.a.createElement(u.a,{from:e.from.toString(),to:e.to.toString(),exact:e.exact,key:i()()})}))}),rt=function(e){var t=e.path;return Object(s.c)((function(e){return e.auth.token}))?r.a.createElement(u.b,e):r.a.createElement(u.a,{from:t,to:"/login"})},ct=function(e){var t=e.store;return r.a.createElement(m.a,null,r.a.createElement(s.a,{store:t},r.a.createElement(u.d,null,tt.map((function(e,a){return e.private?r.a.createElement(rt,Object.assign({key:a.toString()},e,{store:t})):r.a.createElement(u.b,Object.assign({key:a.toString()},e,{store:t}))})),r.a.createElement(nt,{redirectList:at}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ot=a(22),st=a(229),lt=a(56),it=a(225),ut=a.n(it),mt=a(226),dt=a(227),pt={loading:!1,message:"",error:null};var gt={loading:!1,token:"",phone:"",error:null};var bt=Object(lt.c)({message:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:pt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SEND_MESSAGE":return Object(ot.a)({},e,{loading:!0});case"ON_MESSAGE_CHANGE":return Object(ot.a)({},e,{message:t.payload});case"ON_MESSAGE_RESET":return Object(ot.a)({},e,{message:""});case"SEND_MESSAGE_SUCCESS":return Object(ot.a)({},e,{loading:!1,error:null,message:""});case"SEND_MESSAGE_FAIL":return Object(ot.a)({},e,{loading:!1,error:t.payload.error});default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gt,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SAVE_AUTH_TOKEN":return Object(ot.a)({},e,{token:t.payload});case"SAVE_PHONE":return Object(ot.a)({},e,{phone:t.payload});case"VALIDATE_TOKEN_START":return Object(ot.a)({},e,{loading:!0,error:null});case"VALIDATE_TOKEN_SUCCESS":return Object(ot.a)({},e,{loading:!1,error:null});case"VALIDATE_TOKEN_FAIL":return Object(ot.a)({},e,{token:"",loading:!1,error:t.payload.error});default:return e}}}),ht=function(){var e;Object(mt.createLogger)({});e=[dt.a];var t=lt.d.apply(void 0,[lt.a.apply(void 0,Object(st.a)(e))].concat([])),a=Object(ot.a)({},function(){try{var e=localStorage.getItem("state");if(null===e)return;return Object(ot.a)({},JSON.parse(e))}catch(t){return}}()),n=Object(lt.e)(bt,a,t);return n.subscribe(ut()((function(){!function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){}}({auth:n.getState().auth})}),3e3)),n};a(461),a(463);A.initializeApp({apiKey:"AIzaSyDVT7hjCcB-mi3a-q4A7XZvbkGgc8z4Q5w",databaseURL:"https://hackh-broadcast.firebaseio.com",storageBucket:"hackh-broadcast.appspot.com"}),A.auth().setPersistence(A.auth.Auth.Persistence.LOCAL);var ft=ht();o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ct,{store:ft})),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[234,1,2]]]);
//# sourceMappingURL=main.8bbaafa0.chunk.js.map